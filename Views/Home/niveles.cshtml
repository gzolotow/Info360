@{
    ViewData["Title"] = "Niveles";

    /* Lógica de niveles completados (recibida del controlador) */
    bool nivel1Completado = ViewBag.Nivel1Completado ?? false;
    bool nivel2Completado = ViewBag.Nivel2Completado ?? false;
}

<div class="niveles-container">
    
    <!-- Botón Volver -->
    <a href="javascript:history.back()" class="niveles-btn-volver">
        &#8592;
    </a>

    <!-- Botón Misiones -->
    <a href="@Url.Action("Misiones", "Home")" class="niveles-btn-misiones">
        Misiones
    </a>

    <!-- Líneas Conectoras -->
    <svg class="niveles-conexiones-svg" viewBox="0 0 100 100" preserveAspectRatio="none">
        <!-- Tutorial a Nivel 1 -->
        <path d="M 15 65 C 15 50, 25 35, 40 35" 
              stroke="black" 
              stroke-width="3" 
              fill="none" 
              vector-effect="non-scaling-stroke" />
        
        <!-- Nivel 1 a Nivel 2 -->
        <path d="M 40 35 C 55 35, 50 65, 65 65" 
              stroke="black" 
              stroke-width="3" 
              fill="none" 
              vector-effect="non-scaling-stroke" />
        
        <!-- Nivel 2 a Nivel 3 -->
        <path d="M 65 65 C 80 65, 75 35, 90 35" 
              stroke="black" 
              stroke-width="3" 
              fill="none" 
              vector-effect="non-scaling-stroke" />
    </svg>

    <!-- NODO: Tutorial (Siempre disponible) -->
    <a href="javascript:void(0)" onclick="abrirOverlay()" class="niveles-nodo niveles-nodo-tutorial">
        Tutorial
    </a>

    <!-- NODO: Nivel 1 (Siempre disponible) -->
    <a href="@Url.Action("Nivel1", "Home")" class="niveles-nodo niveles-nodo-1">
        NIVEL 1
    </a>

    <!-- NODO: Nivel 2 -->
    @if (nivel1Completado)
    {
        <a href="/Nivel2" class="niveles-nodo niveles-nodo-2">
            NIVEL 2
        </a>
    }
    else
    {
        <div class="niveles-nodo niveles-nodo-2 niveles-bloqueado">
            <span class="niveles-candado">&#128274;</span>
            NIVEL 2
        </div>
    }

    <!-- NODO: Nivel 3 -->
    @if (nivel2Completado)
    {
        <a href="/Nivel3" class="niveles-nodo niveles-nodo-3">
            NIVEL 3
        </a>
    }
    else
    {
        <div class="niveles-nodo niveles-nodo-3 niveles-bloqueado">
            <span class="niveles-candado">&#128274;</span>
            NIVEL 3
        </div>
    }

</div>

<!-- Overlay del Tutorial -->
<div id="tutorial-overlay" class="overlay" style="display:none;">
    <div class="overlay-content">
        <button class="overlay-close" onclick="cerrarOverlay()">✖</button>
        <img src="/img/tutorial.png" alt="Tutorial Basura" class="overlay-img" />
    </div>
</div>

<!-- Scripts -->
<script>
    function abrirOverlay() {
        document.getElementById('tutorial-overlay').style.display = 'flex';
    }
    function cerrarOverlay() {
        document.getElementById('tutorial-overlay').style.display = 'none';
    }
